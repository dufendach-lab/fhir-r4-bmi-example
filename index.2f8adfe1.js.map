{"mappings":"qhBAgDAA,EAhDAC,EAAA,UAgDAC,OAAAC,QAAAC,MAAAC,I,wFAXA,SAAAC,GACE,MAAAC,EAASC,SAAAC,eAAe,WACxBF,IAAMA,EAAAG,UAAcJ,E,EA1BnB,SAAAK,GAED,GAAAA,EAAOL,KAGT,OAFAK,EAAAL,KAAAM,KAAAN,GAAA,GAAAA,EAAAO,OAAAC,KAAA,QAAAR,EAAAS,WAEAD,KAAA,OAQE,MAAI,gBAGN,C","sources":["src/index.ts"],"sourcesContent":["import FHIR from \"fhirclient\";\r\nimport {Observation, Patient, Resource} from \"fhir/r4\";\r\nimport Client from \"fhirclient/lib/Client\";\r\n\r\n/**\r\n * Extract names from FHIR Patient object\r\n * @param pt FHIR patient\r\n * @return string with list of names or \"Name not found\"\r\n */\r\nfunction getPatientName(pt: Patient) {\r\n  if (pt.name) {\r\n    const names = pt.name.map(name => `${name.given?.join(\" \")} ${name.family}`)\r\n    return names.join(\" / \")\r\n  }\r\n\r\n  return \"Name not found\"\r\n}\r\n\r\n/**\r\n * Update the 'pt_name' document to the text of 'name'\r\n *\r\n * @param name string containing the patient name(s)\r\n */\r\nfunction updatePatientName(name: string) {\r\n  const el = document.getElementById('pt_name');\r\n\r\n  if (el) {\r\n    el.innerHTML = name;\r\n  }\r\n}\r\n\r\n////////////////////////// Weight List /////////////////////////////\r\n\r\n// function getObservationByCode(client: Client, code: string) {\r\n//   return client.request<Observation>(`Observation?code=${code}`)\r\n// }\r\n\r\nFHIR.oauth2.ready().then(client => {\r\n  document.getElementById(\"launch_link\")?.remove()\r\n  const ptId = client.patient.id;\r\n\r\n  client.patient.read().then(pt => updatePatientName(getPatientName(pt)))\r\n\r\n  const code='29463-7'\r\n  client.patient.request<Resource>(`Observation?code=${code}`).then(res => {\r\n    console.log(res)\r\n  })\r\n\r\n})\r\n"],"names":["$parcel$interopDefault","parcelRequire","oauth2","ready","then","client","name","el","document","getElementById","innerHTML","pt","map","given","join","family"],"version":3,"file":"index.2f8adfe1.js.map"}