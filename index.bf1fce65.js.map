{"mappings":"uhBAAAA,EAAA,U,+KAYG,SAAAC,GAED,GAAAA,EAAOC,KAGT,OAFAD,EAAAC,KAAAC,KAAAD,GAAA,GAAAA,EAAAE,OAAAC,KAAA,QAAAH,EAAAI,WAEAD,KAAA,OAQE,MAAI,gBAGN,C","sources":["src/index.ts"],"sourcesContent":["import FHIR from \"fhirclient\";\r\nimport {Patient} from \"fhir/r4\";\r\n\r\n/**\r\n * Extract names from FHIR Patient object\r\n * @param pt FHIR patient\r\n * @return string with list of names or \"Name not found\"\r\n */\r\nfunction getPatientName(pt: Patient) {\r\n  if (pt.name) {\r\n    const names = pt.name.map(name => `${name.given?.join(\" \")} ${name.family}`)\r\n    return names.join(\" / \")\r\n  }\r\n\r\n  return \"Name not found\"\r\n}\r\n\r\n/**\r\n * Update the 'pt_name' document to the text of 'name'\r\n *\r\n * @param name string containing the patient name(s)\r\n */\r\nfunction updatePatientName(name: string) {\r\n  const el = document.getElementById('pt_name');\r\n\r\n  if (el) {\r\n    el.innerHTML = name;\r\n  }\r\n}\r\n\r\nFHIR.oauth2.ready().then(client => {\r\n  document.getElementById(\"launch_link\")?.remove()\r\n\r\n  client.patient.read().then(pt => updatePatientName(getPatientName(pt)))\r\n})\r\n"],"names":["parcelRequire","pt","name","map","given","join","family"],"version":3,"file":"index.bf1fce65.js.map"}