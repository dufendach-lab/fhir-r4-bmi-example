var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var r={},n={},o=e.parcelRequire17b7;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequire17b7=o),o.register("i3ey2",(function(e,t){const r=new(o("2WkJ6").default),{ready:n,authorize:i,init:s,client:a,options:u,utils:c}=r.getSmartApi();if("undefined"==typeof FHIRCLIENT_PURE){const e=o("R5nvG");o("lzME1"),window.fetch||(window.fetch=e.default,window.Headers=e.Headers,window.Request=e.Request,window.Response=e.Response)}const f={AbortController:window.AbortController,client:a,utils:c,oauth2:{settings:u,ready:n,authorize:i,init:s}};e.exports=f})),o.register("2WkJ6",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=o("djwY4"),n=o("k1ehl"),i=o("7dNBp"),s=o("8lccY"),a=o("a4eSS");e.exports.default=class{constructor(e={}){this._url=null,this._storage=null,this.security=s,this.options=Object.assign({replaceBrowserHistory:!0,fullSessionStorageSupport:!0,refreshTokenWithCredentials:"same-origin"},e)}relative(e){return new URL(e,this.getUrl().href).href}get fhir(){return"function"==typeof fhir?fhir:null}getUrl(){return this._url||(this._url=new URL(location+"")),this._url}redirect(e){location.href=e}getStorage(){return this._storage||(this._storage=new i.default),this._storage}getAbortController(){return AbortController}atob(e){return window.atob(e)}btoa(e){return window.btoa(e)}base64urlencode(e){return"string"==typeof e?(0,a.encodeURL)(e):(0,a.fromUint8Array)(e,!0)}base64urldecode(e){return(0,a.decode)(e)}getSmartApi(){return{ready:(...e)=>(0,r.ready)(this,...e),authorize:e=>(0,r.authorize)(this,e),init:e=>(0,r.init)(this,e),client:e=>new n.default(this,e),options:this.options,utils:{security:s}}}}})),o.register("djwY4",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.init=e.exports.buildTokenRequest=e.exports.ready=e.exports.onMessage=e.exports.isInPopUp=e.exports.isInFrame=e.exports.authorize=e.exports.getSecurityExtensions=e.exports.fetchWellKnownJson=e.exports.KEY=void 0;var r=o("5mj47"),n=o("k1ehl"),i=o("jJLgQ");Object.defineProperty(e.exports,"KEY",{enumerable:!0,get:function(){return i.SMART_KEY}});const s=r.debug.extend("oauth2");function a(){return"object"==typeof window}function u(e="/",t){const n=String(e).replace(/\/*$/,"/")+".well-known/smart-configuration";return(0,r.getAndCache)(n,t).catch((e=>{throw new Error(`Failed to fetch the well-known json "${n}". ${e.message}`)}))}function c(e="/"){return function(e="/",t){return u(e,t).then((e=>{if(!e.authorization_endpoint||!e.token_endpoint)throw new Error("Invalid wellKnownJson");return{registrationUri:e.registration_endpoint||"",authorizeUri:e.authorization_endpoint,tokenUri:e.token_endpoint,codeChallengeMethods:e.code_challenge_methods_supported||[]}}))}(e).catch((()=>function(e="/",t){return(0,r.fetchConformanceStatement)(e,t).then((e=>{const t=((0,r.getPath)(e||{},"rest.0.security.extension")||[]).filter((e=>"http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris"===e.url)).map((e=>e.extension))[0],n={registrationUri:"",authorizeUri:"",tokenUri:"",codeChallengeMethods:[]};return t&&t.forEach((e=>{"register"===e.url&&(n.registrationUri=e.valueUri),"authorize"===e.url&&(n.authorizeUri=e.valueUri),"token"===e.url&&(n.tokenUri=e.valueUri)})),n}))}(e)))}async function f(e,t={}){const n=e.getUrl();if(Array.isArray(t)){const o=n.searchParams.get("iss")||n.searchParams.get("fhirServiceUrl");if(!o)throw new Error('Passing in an "iss" url parameter is required if authorize uses multiple configurations');const i=t.find((e=>{if(e.issMatch){if("function"==typeof e.issMatch)return!!e.issMatch(o);if("string"==typeof e.issMatch)return e.issMatch===o;if(e.issMatch instanceof RegExp)return e.issMatch.test(o)}return!1}));return(0,r.assert)(i,`No configuration found matching the current "iss" parameter "${o}"`),await f(e,i)}const{redirect_uri:o,clientSecret:u,fakeTokenResponse:d,patientId:y,encounterId:g,client_id:b,target:m,width:w,height:v,pkceMode:A,clientPublicKeySetUrl:x}=t;let{iss:E,launch:C,fhirServiceUrl:S,redirectUri:k,noRedirect:O,scope:R="",clientId:P,completeInTarget:U,clientPrivateJwk:T}=t;const _=e.getStorage();E=n.searchParams.get("iss")||E,S=n.searchParams.get("fhirServiceUrl")||S,C=n.searchParams.get("launch")||C,P||(P=b),k||(k=o),k?k.match(/^https?\:\/\//)||(k=e.relative(k)):k=e.relative(".");const j=String(E||S||"");if(!j)throw new Error("No server url found. It must be specified as `iss` or as `fhirServiceUrl` parameter");if(E&&s("Making %s launch...",C?"EHR":"standalone"),C&&!R.match(/launch/)&&(R+=" launch"),a()){const e=l(),t=p();(e||t)&&!0!==U&&!1!==U&&(U=e,console.warn('Your app is being authorized from within an iframe or popup window. Please be explicit and provide a "completeInTarget" option. Use "true" to complete the authorization in the same window, or "false" to try to complete it in the parent or the opener window. See http://docs.smarthealthit.org/client-js/api.html'))}const I=await _.get(i.SMART_KEY);await _.unset(I);const F=(0,r.randomString)(16),B={clientId:P,scope:R,redirectUri:k,serverUrl:j,clientSecret:u,clientPrivateJwk:T,tokenResponse:{},key:F,completeInTarget:U,clientPublicKeySetUrl:x};(!a()||(0,r.getPath)(e,"options.fullSessionStorageSupport"))&&await _.set(i.SMART_KEY,F),d&&Object.assign(B.tokenResponse,d),y&&Object.assign(B.tokenResponse,{patient:y}),g&&Object.assign(B.tokenResponse,{encounter:g});let M=k+"?state="+encodeURIComponent(F);if(S&&!E)return s("Making fake launch..."),await _.set(F,B),O?M:await e.redirect(M);const L=await c(j);if(Object.assign(B,L),await _.set(F,B),!B.authorizeUri)return O?M:await e.redirect(M);const D=["response_type=code","client_id="+encodeURIComponent(P||""),"scope="+encodeURIComponent(R),"redirect_uri="+encodeURIComponent(k),"aud="+encodeURIComponent(j),"state="+encodeURIComponent(F)];if(C&&D.push("launch="+encodeURIComponent(C)),function(e,t){if("disabled"===t)return!1;if("unsafeV1"===t)return!0;if("required"===t){if(!e)throw new Error("Required PKCE code challenge method (`S256`) was not found.");return!0}return e}(L.codeChallengeMethods.includes("S256"),A)){let t=await e.security.generatePKCEChallenge();Object.assign(B,t),await _.set(F,B),D.push("code_challenge="+B.codeChallenge),D.push("code_challenge_method=S256")}if(M=B.authorizeUri+"?"+D.join("&"),O)return M;if(!m||!a())return await e.redirect(M);{let e;if(e=await(0,r.getTargetWindow)(m,w,v),e!==self)try{e.sessionStorage.removeItem(I),e.sessionStorage.setItem(F,JSON.stringify(B))}catch(t){(0,r.debug)('Failed to modify window.sessionStorage. Perhaps it is from different origin?. Failing back to "_self". %s',t),e=self}if(e!==self)try{e.location.href=M,self.addEventListener("message",h)}catch(e){(0,r.debug)('Failed to modify window.location. Perhaps it is from different origin?. Failing back to "_self". %s',e),self.location.href=M}else self.location.href=M}}function l(){try{return self!==top&&parent!==self}catch(e){return!0}}function p(){try{return self===top&&!!opener&&opener!==self&&!!window.name}catch(e){return!1}}function h(e){"completeAuth"==e.data.type&&e.origin===new URL(self.location.href).origin&&(window.removeEventListener("message",h),window.location.href=e.data.url)}async function d(e,t={}){var o,u;const c=e.getUrl(),f=e.getStorage(),h=c.searchParams;let d=h.get("state");const g=h.get("code"),b=h.get("error"),m=h.get("error_description");if(d||(d=await f.get(i.SMART_KEY)),b||m)throw new Error([b,m].filter(Boolean).join(": "));s("key: %s, code: %s",d,g),(0,r.assert)(d,"No 'state' parameter found. Please (re)launch the app.");let w=await f.get(d);const v=!a()||(0,r.getPath)(e,"options.fullSessionStorageSupport");if(a()&&w&&!w.completeInTarget){const e=l(),t=p();if((e||t)&&!c.searchParams.get("complete")){c.searchParams.set("complete","1");const{href:r,origin:n}=c;return e&&parent.postMessage({type:"completeAuth",url:r},n),t&&(opener.postMessage({type:"completeAuth",url:r},n),window.close()),new Promise((()=>{}))}}c.searchParams.delete("complete");const A=h.has("state");a()&&(0,r.getPath)(e,"options.replaceBrowserHistory")&&(g||A)&&(g&&(h.delete("code"),s("Removed code parameter from the url.")),A&&v&&(h.delete("state"),s("Removed state parameter from the url.")),window.history.replaceState&&window.history.replaceState({},"",c.href)),(0,r.assert)(w,"No state found! Please (re)launch the app.");if(!(!g||(null===(o=w.tokenResponse)||void 0===o?void 0:o.access_token))&&w.tokenUri){(0,r.assert)(g,"'code' url parameter is required"),s("Preparing to exchange the code for access token...");const n=await y(e,{code:g,state:w,clientPublicKeySetUrl:t.clientPublicKeySetUrl,privateKey:t.privateKey||w.clientPrivateJwk});s("Token request options: %O",n);const o=await(0,r.request)(w.tokenUri,n);s("Token response: %O",o),(0,r.assert)(o.access_token,"Failed to obtain access token."),w.expiresAt=(0,r.getAccessTokenExpiration)(o,e),w=Object.assign(Object.assign({},w),{tokenResponse:o}),await f.set(d,w),s("Authorization successful!")}else s((null===(u=w.tokenResponse)||void 0===u?void 0:u.access_token)?"Already authorized":"No authorization needed");v&&await f.set(i.SMART_KEY,d);const x=new n.default(e,w);return s("Created client instance: %O",x),x}async function y(e,{code:t,state:n,clientPublicKeySetUrl:o,privateKey:i}){const{redirectUri:a,clientSecret:u,tokenUri:c,clientId:f,codeVerifier:l}=n;(0,r.assert)(a,"Missing state.redirectUri"),(0,r.assert)(c,"Missing state.tokenUri"),(0,r.assert)(f,"Missing state.clientId");const p={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:`code=${t}&grant_type=authorization_code&redirect_uri=${encodeURIComponent(a)}`};if(u)p.headers.authorization="Basic "+e.btoa(f+":"+u),s("Using state.clientSecret to construct the authorization header: %s",p.headers.authorization);else if(i){const t="key"in i?i.key:await e.security.importJWK(i),a={typ:"JWT",kid:i.kid,jku:o||n.clientPublicKeySetUrl},u={iss:f,sub:f,aud:c,jti:e.base64urlencode(e.security.randomBytes(32)),exp:(0,r.getTimeInFuture)(120)},l=await e.security.signCompactJws(i.alg,t,a,u);p.body+=`&client_assertion_type=${encodeURIComponent("urn:ietf:params:oauth:client-assertion-type:jwt-bearer")}`,p.body+=`&client_assertion=${encodeURIComponent(l)}`,s("Using state.clientPrivateJwk to add a client_assertion to the POST body")}else s("Public client detected; adding state.clientId to the POST body"),p.body+=`&client_id=${encodeURIComponent(f)}`;return l&&(s("Found state.codeVerifier, adding to the POST body"),p.body+="&code_verifier="+l),p}e.exports.fetchWellKnownJson=u,e.exports.getSecurityExtensions=c,e.exports.authorize=f,e.exports.isInFrame=l,e.exports.isInPopUp=p,e.exports.onMessage=h,e.exports.ready=d,e.exports.buildTokenRequest=y,e.exports.init=async function(e,t,r){const o=e.getUrl(),s=o.searchParams.get("code"),a=o.searchParams.get("state");if(s&&a)return d(e,r);const u=e.getStorage(),c=a||await u.get(i.SMART_KEY),l=await u.get(c);return l?new n.default(e,l):f(e,t).then((()=>new Promise((()=>{}))))}})),o.register("5mj47",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.assertJsonPatch=e.exports.assert=e.exports.getTargetWindow=e.exports.getPatientParam=e.exports.byCodes=e.exports.byCode=e.exports.getAccessTokenExpiration=e.exports.getTimeInFuture=e.exports.jwtDecode=e.exports.randomString=e.exports.absolute=e.exports.makeArray=e.exports.setPath=e.exports.getPath=e.exports.fetchConformanceStatement=e.exports.getAndCache=e.exports.request=e.exports.loweCaseKeys=e.exports.responseToJSON=e.exports.checkResponse=e.exports.units=e.exports.debug=void 0;var r=o("ii75L"),n=o("jJLgQ"),i=o("1SXIy");const{fetch:s}="undefined"!=typeof FHIRCLIENT_PURE?window:o("R5nvG"),a=i("FHIR");e.exports.debug=a;const u={};function c({value:e,code:t}){if("number"!=typeof e)throw new Error("Found a non-numerical unit: "+e+" "+t)}async function f(e){if(!e.ok){const t=new r.default(e);throw await t.parse(),t}return e}function l(e){return e.text().then((e=>e.length?JSON.parse(e):""))}function p(e){if(!e)return e;if(Array.isArray(e))return e.map((e=>e&&"object"==typeof e?p(e):e));let t={};return Object.keys(e).forEach((r=>{const n=r.toLowerCase(),o=e[r];t[n]=o&&"object"==typeof o?p(o):o})),t}function h(e,t={}){const{includeResponse:r}=t,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(t,["includeResponse"]);return s(e,Object.assign(Object.assign({mode:"cors"},n),{headers:Object.assign({accept:"application/json"},p(n.headers))})).then(f).then((e=>{const t=e.headers.get("content-type")+"";return t.match(/\bjson\b/i)?l(e).then((t=>({res:e,body:t}))):t.match(/^text\//i)?e.text().then((t=>({res:e,body:t}))):{res:e}})).then((({res:e,body:t})=>{if(!t&&201==e.status){const t=e.headers.get("location");if(t)return h(t,Object.assign(Object.assign({},n),{method:"GET",body:null,includeResponse:r}))}return r?{body:t,response:e}:void 0===t?e:t}))}function d(e,t,r=!1){return r||!u[e]?(u[e]=h(e,t),u[e]):Promise.resolve(u[e])}function y(e,t=""){if(!(t=t.trim()))return e;let r=t.split("."),n=e;for(;n&&r.length;){const e=r.shift();if(!e&&Array.isArray(n))return n.map((e=>y(e,r.join("."))));n=n[e]}return n}function g(e){return Array.isArray(e)?e:[e]}function b(e,t){const r=e.split(".")[1];return r?JSON.parse(t.atob(r)):null}function m(e,t){const r={};function n(e,t){e&&Array.isArray(e.coding)&&e.coding.forEach((({code:e})=>{e&&(r[e]=r[e]||[],r[e].push(t))}))}return g(e).forEach((e=>{"Observation"===e.resourceType&&e[t]&&(Array.isArray(e[t])?e[t].forEach((t=>n(t,e))):n(e[t],e))})),r}function w(e,t){if(!e)throw new Error(t)}e.exports.units={cm({code:e,value:t}){if(c({code:e,value:t}),"cm"==e)return t;if("m"==e)return 100*t;if("in"==e)return 2.54*t;if("[in_us]"==e)return 2.54*t;if("[in_i]"==e)return 2.54*t;if("ft"==e)return 30.48*t;if("[ft_us]"==e)return 30.48*t;throw new Error("Unrecognized length unit: "+e)},kg({code:e,value:t}){if(c({code:e,value:t}),"kg"==e)return t;if("g"==e)return t/1e3;if(e.match(/lb/))return t/2.20462;if(e.match(/oz/))return t/35.274;throw new Error("Unrecognized weight unit: "+e)},any:e=>(c(e),e.value)},e.exports.checkResponse=f,e.exports.responseToJSON=l,e.exports.loweCaseKeys=p,e.exports.request=h,e.exports.getAndCache=d,e.exports.fetchConformanceStatement=function(e="/",t){const r=String(e).replace(/\/*$/,"/")+"metadata";return d(r,t).catch((e=>{throw new Error(`Failed to fetch the conformance statement from "${r}". ${e}`)}))},e.exports.getPath=y,e.exports.setPath=function(e,t,r,n=!1){return t.trim().split(".").reduce(((e,t,o,i)=>{if(!e||o!==i.length-1)return e&&void 0===e[t]&&n&&(e[t]=i[o+1].match(/^[0-9]+$/)?[]:{}),e?e[t]:void 0;e[t]=r}),e),e},e.exports.makeArray=g,e.exports.absolute=function(e,t){return e.match(/^http/)||e.match(/^urn/)?e:String(t||"").replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")},e.exports.randomString=function(e=8,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"){const r=[],n=t.length;for(;e--;)r.push(t.charAt(Math.floor(Math.random()*n)));return r.join("")},e.exports.jwtDecode=b,e.exports.getTimeInFuture=function(e=120,t){return Math.floor(+(t||new Date)/1e3+e)},e.exports.getAccessTokenExpiration=function(e,t){const r=Math.floor(Date.now()/1e3);if(e.expires_in)return r+e.expires_in;if(e.access_token){let r=b(e.access_token,t);if(r&&r.exp)return r.exp}return r+300},e.exports.byCode=m,e.exports.byCodes=function(e,t){const r=m(e,t);return(...e)=>e.filter((e=>e+""in r)).reduce(((e,t)=>e.concat(r[t+""])),[])},e.exports.getPatientParam=function(e,t){const r=(y(e,"rest.0.resource")||[]).find((e=>e.type===t));if(!r)throw new Error(`Resource "${t}" is not supported by this FHIR server`);if(!Array.isArray(r.searchParam))throw new Error(`No search parameters supported for "${t}" on this FHIR server`);if("Patient"==t&&r.searchParam.find((e=>"_id"==e.name)))return"_id";const o=n.patientParams.find((e=>r.searchParam.find((t=>t.name==e))));if(!o)throw new Error("I don't know what param to use for "+t);return o},e.exports.getTargetWindow=async function(e,t=800,r=720){if("function"==typeof e&&(e=await e()),e&&"object"==typeof e)return e;if("string"!=typeof e)return a("Invalid target type '%s'. Failing back to '_self'.",typeof e),self;if("_self"==e)return self;if("_parent"==e)return parent;if("_top"==e)return top||self;if("_blank"==e){let e,t=null;try{if(t=window.open("","SMARTAuthPopup"),!t)throw new Error("Perhaps window.open was blocked")}catch(t){e=t}return t||(a("Cannot open window. Failing back to '_self'. %s",e),self)}if("popup"==e){let e,n=null;try{if(n=window.open("","SMARTAuthPopup",["height="+r,"width="+t,"menubar=0","resizable=1","status=0","top="+(screen.height-r)/2,"left="+(screen.width-t)/2].join(",")),!n)throw new Error("Perhaps the popup window was blocked")}catch(t){e=t}return n||(a("Cannot open window. Failing back to '_self'. %s",e),self)}const n=frames[e];return n||(a("Unknown target '%s'. Failing back to '_self'.",e),self)},e.exports.assert=w,e.exports.assertJsonPatch=function(e){w(Array.isArray(e),"The JSON patch must be an array"),w(e.length>0,"The JSON patch array should not be empty"),e.forEach((e=>{w(["add","replace","test","move","copy","remove"].indexOf(e.op)>-1,'Each patch operation must have an "op" property which must be one of: "add", "replace", "test", "move", "copy", "remove"'),w(e.path&&typeof e.path,`Invalid "${e.op}" operation. Missing "path" property`),"add"==e.op||"replace"==e.op||"test"==e.op?(w("value"in e,`Invalid "${e.op}" operation. Missing "value" property`),w(3==Object.keys(e).length,`Invalid "${e.op}" operation. Contains unknown properties`)):"move"==e.op||"copy"==e.op?(w("string"==typeof e.from,`Invalid "${e.op}" operation. Requires a string "from" property`),w(3==Object.keys(e).length,`Invalid "${e.op}" operation. Contains unknown properties`)):w(2==Object.keys(e).length,`Invalid "${e.op}" operation. Contains unknown properties`)}))}})),o.register("ii75L",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});class r extends Error{constructor(e){super(`${e.status} ${e.statusText}\nURL: ${e.url}`),this.name="HttpError",this.response=e,this.statusCode=e.status,this.status=e.status,this.statusText=e.statusText}async parse(){if(!this.response.bodyUsed)try{const e=this.response.headers.get("content-type")||"text/plain";if(e.match(/\bjson\b/i)){let e=await this.response.json();e.error?(this.message+="\n"+e.error,e.error_description&&(this.message+=": "+e.error_description)):this.message+="\n\n"+JSON.stringify(e,null,4)}else if(e.match(/^text\//i)){let e=await this.response.text();e&&(this.message+="\n\n"+e)}}catch(e){}return this}toJSON(){return{name:this.name,statusCode:this.statusCode,status:this.status,statusText:this.statusText,message:this.message}}}e.exports.default=r})),o.register("jJLgQ",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SMART_KEY=e.exports.patientParams=e.exports.fhirVersions=e.exports.patientCompartment=void 0,e.exports.patientCompartment=["Account","AdverseEvent","AllergyIntolerance","Appointment","AppointmentResponse","AuditEvent","Basic","BodySite","BodyStructure","CarePlan","CareTeam","ChargeItem","Claim","ClaimResponse","ClinicalImpression","Communication","CommunicationRequest","Composition","Condition","Consent","Coverage","CoverageEligibilityRequest","CoverageEligibilityResponse","DetectedIssue","DeviceRequest","DeviceUseRequest","DeviceUseStatement","DiagnosticOrder","DiagnosticReport","DocumentManifest","DocumentReference","EligibilityRequest","Encounter","EnrollmentRequest","EpisodeOfCare","ExplanationOfBenefit","FamilyMemberHistory","Flag","Goal","Group","ImagingManifest","ImagingObjectSelection","ImagingStudy","Immunization","ImmunizationEvaluation","ImmunizationRecommendation","Invoice","List","MeasureReport","Media","MedicationAdministration","MedicationDispense","MedicationOrder","MedicationRequest","MedicationStatement","MolecularSequence","NutritionOrder","Observation","Order","Patient","Person","Procedure","ProcedureRequest","Provenance","QuestionnaireResponse","ReferralRequest","RelatedPerson","RequestGroup","ResearchSubject","RiskAssessment","Schedule","ServiceRequest","Specimen","SupplyDelivery","SupplyRequest","VisionPrescription"],e.exports.fhirVersions={"0.4.0":2,"0.5.0":2,"1.0.0":2,"1.0.1":2,"1.0.2":2,"1.1.0":3,"1.4.0":3,"1.6.0":3,"1.8.0":3,"3.0.0":3,"3.0.1":3,"3.3.0":4,"3.5.0":4,"4.0.0":4,"4.0.1":4},e.exports.patientParams=["patient","subject","requester","member","actor","beneficiary"],e.exports.SMART_KEY="SMART_KEY"})),o.register("1SXIy",(function(e,t){var r=o("hPtJY");e.exports.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},e.exports.save=function(t){try{t?e.exports.storage.setItem("debug",t):e.exports.storage.removeItem("debug")}catch(e){}},e.exports.load=function(){let t;try{t=e.exports.storage.getItem("debug")}catch(e){}!t&&void 0!==r&&"env"in r&&(t=void 0);return t},e.exports.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.exports.storage=function(){try{return localStorage}catch(e){}}(),e.exports.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports.log=console.debug||console.log||(()=>{}),e.exports=o("7kBR8")(e.exports);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),o.register("hPtJY",(function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var u,c=[],f=!1,l=-1;function p(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&h())}function h(){if(!f){var e=a(p);f=!0;for(var t=c.length;t;){for(u=c,c=[];++l<t;)u&&u[l].run();l=-1,t=c.length}u=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||f||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}})),o.register("7kBR8",(function(e,t){e.exports=function(e){function t(e){let n,o,i,s=null;function a(...e){if(!a.enabled)return;const r=a,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";s++;const i=t.formatters[o];if("function"==typeof i){const t=e[s];n=i.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=o("3pRq5"),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}})),o.register("3pRq5",(function(e,t){var r=1e3,n=6e4,o=36e5,i=864e5,s=6048e5,a=315576e5;function u(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,t){t=t||{};var c,f,l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*a;case"weeks":case"week":case"w":return u*s;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*o;case"minutes":case"minute":case"mins":case"min":case"m":return u*n;case"seconds":case"second":case"secs":case"sec":case"s":return u*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===l&&isFinite(e))return t.long?(c=e,(f=Math.abs(c))>=i?u(c,f,i,"day"):f>=o?u(c,f,o,"hour"):f>=n?u(c,f,n,"minute"):f>=r?u(c,f,r,"second"):c+" ms"):function(e){var t=Math.abs(e);return t>=i?Math.round(e/i)+"d":t>=o?Math.round(e/o)+"h":t>=n?Math.round(e/n)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}})),o.register("R5nvG",(function(e,t){var r,n="undefined"!=typeof self?self:this,o=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();r=o,function(e){var t="URLSearchParams"in r,n="Symbol"in r&&"iterator"in Symbol,o="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in r,s="ArrayBuffer"in r;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var r;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&o&&(r=e)&&DataView.prototype.isPrototypeOf(r)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,r,n=h(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=d(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=c(e),t=f(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[c(e)]},p.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},p.prototype.set=function(e,t){this.map[c(e)]=f(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){var r,n,o=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),m.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function A(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},A.error=function(){var e=new A(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];A.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new A(null,{status:t,headers:{location:e}})},e.DOMException=r.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(t,r){return new Promise((function(n,i){var s=new w(t,r);if(s.signal&&s.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new A(o,r))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&o&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}E.polyfill=!0,r.fetch||(r.fetch=E,r.Headers=p,r.Request=w,r.Response=A),e.Headers=p,e.Request=w,e.Response=A,e.fetch=E,Object.defineProperty(e,"__esModule",{value:!0})}({}),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=o;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})),o.register("k1ehl",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=o("5mj47"),n=o("bbDtp"),i=o("jJLgQ");const{Response:s}="undefined"!=typeof FHIRCLIENT_PURE?window:o("R5nvG"),a=r.debug.extend("client");function u(e,t,n,o,i,s){const a=(0,r.getPath)(e,t);if(a){const u=Array.isArray(a);return Promise.all((0,r.makeArray)(a).filter(Boolean).map(((a,c)=>{const f=a.reference;if(f)return function(e,t,r,n){return t[e]||(t[e]=r.request({url:e,signal:n}).then((r=>(t[e]=r,r)),(r=>{throw delete t[e],r}))),Promise.resolve(t[e])}(f,o,i,s).then((o=>{n&&(u?t.indexOf("..")>-1?(0,r.setPath)(e,`${t.replace("..",`.${c}.`)}`,o):(0,r.setPath)(e,`${t}.${c}`,o):(0,r.setPath)(e,t,o))})).catch((e=>{if(404!==e.status)throw e}))})))}}function c(e,t,n,o,i){let s=(0,r.makeArray)(t.resolveReferences).filter(Boolean).map((e=>String(e).trim())).filter(Boolean);if(s=s.filter(((e,t)=>!(s.indexOf(e,t+1)>-1)||(a('Duplicated reference path "%s"',e),!1))),!s.length)return Promise.resolve();const c={};s.forEach((e=>{const t=e.split(".").length;c[t]||(c[t]=[]),c[t].push(e)}));let f=Promise.resolve();return Object.keys(c).sort().forEach((r=>{const s=c[r];f=f.then((()=>Promise.all(s.map((r=>u(e,r,!!t.graph,n,o,i))))))})),f}e.exports.default=class{constructor(e,t){this.units=r.units;const n="string"==typeof t?{serverUrl:t}:t;(0,r.assert)(n.serverUrl&&n.serverUrl.match(/https?:\/\/.+/),'A "serverUrl" option is required and must begin with "http(s)"'),this.state=n,this.environment=e,this._refreshTask=null;const o=this;this.patient={get id(){return o.getPatientId()},read:e=>{const t=this.patient.id;return t?this.request(Object.assign(Object.assign({},e),{url:`Patient/${t}`})):Promise.reject(new Error("Patient is not available"))},request:(e,t={})=>this.patient.id?(async()=>{const n=await async function(e,t){const n=(0,r.absolute)("/",t.state.serverUrl);async function o(e){const n=e.pathname.split("/").pop();(0,r.assert)(n,`Invalid url "${e}"`),(0,r.assert)(i.patientCompartment.indexOf(n)>-1,`Cannot filter "${n}" resources by patient`);const o=await(0,r.fetchConformanceStatement)(t.state.serverUrl),s=(0,r.getPatientParam)(o,n);return e.searchParams.set(s,t.patient.id),e.href}return"string"==typeof e||e instanceof URL?{url:await o(new URL(e+"",n))}:(e.url=await o(new URL(e.url+"",n)),e)}(e,this);return this.request(n,t)})():Promise.reject(new Error("Patient is not available"))},this.encounter={get id(){return o.getEncounterId()},read:e=>{const t=this.encounter.id;return t?this.request(Object.assign(Object.assign({},e),{url:`Encounter/${t}`})):Promise.reject(new Error("Encounter is not available"))}},this.user={get fhirUser(){return o.getFhirUser()},get id(){return o.getUserId()},get resourceType(){return o.getUserType()},read:e=>{const t=this.user.fhirUser;return t?this.request(Object.assign(Object.assign({},e),{url:t})):Promise.reject(new Error("User is not available"))}},this.connect(e.fhir)}connect(e){if("function"==typeof e){const t={baseUrl:this.state.serverUrl.replace(/\/$/,"")},r=this.getState("tokenResponse.access_token");if(r)t.auth={token:r};else{const{username:e,password:r}=this.state;e&&r&&(t.auth={user:e,pass:r})}this.api=e(t);const n=this.getState("tokenResponse.patient");n&&(this.patient.api=e(Object.assign(Object.assign({},t),{patient:n})))}return this}getPatientId(){const e=this.state.tokenResponse;return e?e.patient?e.patient:((this.state.scope||"").match(/\blaunch(\/patient)?\b/)?a("The ID of the selected patient is not available. Please check if your server supports that."):a(n.default.noScopeForId,"patient","patient"),null):(this.state.authorizeUri?a(n.default.noIfNoAuth,"the ID of the selected patient"):a(n.default.noFreeContext,"selected patient"),null)}getEncounterId(){const e=this.state.tokenResponse;return e?e.encounter?e.encounter:((this.state.scope||"").match(/\blaunch(\/encounter)?\b/)?a("The ID of the selected encounter is not available. Please check if your server supports that, and that the selected patient has any recorded encounters."):a(n.default.noScopeForId,"encounter","encounter"),null):(this.state.authorizeUri?a(n.default.noIfNoAuth,"the ID of the selected encounter"):a(n.default.noFreeContext,"selected encounter"),null)}getIdToken(){const e=this.state.tokenResponse;if(e){const t=e.id_token,n=this.state.scope||"";if(!t){const e=n.match(/\bopenid\b/),t=n.match(/\bprofile\b/),r=n.match(/\bfhirUser\b/);return a(e&&(r||t)?"The id_token is not available. Please check if your server supports that.":"You are trying to get the id_token but you are not using the right scopes. Please add 'openid' and 'fhirUser' or 'profile' to the scopes you are requesting."),null}return(0,r.jwtDecode)(t,this.environment)}return this.state.authorizeUri?a(n.default.noIfNoAuth,"the id_token"):a(n.default.noFreeContext,"id_token"),null}getFhirUser(){const e=this.getIdToken();return e?e.fhirUser?e.fhirUser.split("/").slice(-2).join("/"):e.profile:null}getUserId(){const e=this.getFhirUser();return e?e.split("/")[1]:null}getUserType(){const e=this.getFhirUser();return e?e.split("/")[0]:null}getAuthorizationHeader(){const e=this.getState("tokenResponse.access_token");if(e)return"Bearer "+e;const{username:t,password:r}=this.state;return t&&r?"Basic "+this.environment.btoa(t+":"+r):null}async _clearState(){const e=this.environment.getStorage(),t=await e.get(i.SMART_KEY);t&&await e.unset(t),await e.unset(i.SMART_KEY),this.state.tokenResponse={}}create(e,t){return this.request(Object.assign(Object.assign({},t),{url:`${e.resourceType}`,method:"POST",body:JSON.stringify(e),headers:Object.assign({"content-type":"application/json"},(t||{}).headers)}))}update(e,t){return this.request(Object.assign(Object.assign({},t),{url:`${e.resourceType}/${e.id}`,method:"PUT",body:JSON.stringify(e),headers:Object.assign({"content-type":"application/json"},(t||{}).headers)}))}delete(e,t={}){return this.request(Object.assign(Object.assign({},t),{url:e,method:"DELETE"}))}async patch(e,t,n={}){return(0,r.assertJsonPatch)(t),this.request(Object.assign(Object.assign({},n),{url:e,method:"PATCH",body:JSON.stringify(t),headers:Object.assign({prefer:"return=presentation","content-type":"application/json-patch+json; charset=UTF-8"},n.headers)}))}async request(e,t={},o={}){var i;const a=r.debug.extend("client:request");let u;(0,r.assert)(e,"request requires an url or request options as argument"),"string"==typeof e||e instanceof URL?(u=String(e),e={}):u=String(e.url),u=(0,r.absolute)(u,this.state.serverUrl);const f={graph:!1!==t.graph,flat:!!t.flat,pageLimit:null!==(i=t.pageLimit)&&void 0!==i?i:1,resolveReferences:t.resolveReferences||[],useRefreshToken:!1!==t.useRefreshToken,onPage:"function"==typeof t.onPage?t.onPage:void 0},l=e.signal||void 0;let p;return(f.useRefreshToken?this.refreshIfNeeded({signal:l}).then((()=>e)):Promise.resolve(e)).then((e=>{const t=this.getAuthorizationHeader();return t&&(e.headers=Object.assign(Object.assign({},e.headers),{authorization:t})),e})).then((e=>(a("%s, options: %O, fhirOptions: %O",u,e,f),(0,r.request)(u,e).then((t=>e.includeResponse?(p=t.response,t.body):t))))).catch((async e=>{if(401==e.status){if(!this.getState("tokenResponse.access_token"))throw e.message+="\nThis app cannot be accessed directly. Please launch it as SMART app!",e;if(!f.useRefreshToken)throw a("Your session has expired and the useRefreshToken option is set to false. Please re-launch the app."),await this._clearState(),e.message+="\n"+n.default.expired,e;throw a("Auto-refresh failed! Please re-launch the app."),await this._clearState(),e.message+="\n"+n.default.expired,e}throw e})).catch((e=>{throw 403==e.status&&a("Permission denied! Please make sure that you have requested the proper scopes."),e})).then((t=>t?"string"==typeof t||t instanceof s?t:(async e=>("Bundle"==e.resourceType?await Promise.all((e.entry||[]).map((e=>c(e.resource,f,o,this,l)))):await c(e,f,o,this,l),e))(t).then((async e=>{if(e&&"Bundle"==e.resourceType){const t=e.link||[];if(f.flat&&(e=(e.entry||[]).map((e=>e.resource))),f.onPage&&await f.onPage(e,Object.assign({},o)),--f.pageLimit){const n=t.find((e=>"next"==e.relation));if(e=(0,r.makeArray)(e),n&&n.url){const t=await this.request({url:n.url,signal:l},f,o);return f.onPage?null:f.resolveReferences.length?(Object.assign(o,t.references),e.concat((0,r.makeArray)(t.data||t))):e.concat((0,r.makeArray)(t))}}}return e})).then((e=>{if(f.graph)o={};else if(!f.onPage&&f.resolveReferences.length)return{data:e,references:o};return e})).then((t=>e.includeResponse?{body:t,response:p}:t)):t))}refreshIfNeeded(e={}){const t=this.getState("tokenResponse.access_token"),r=this.getState("tokenResponse.refresh_token"),n=this.state.expiresAt||0;return t&&r&&n-10<Date.now()/1e3?this.refresh(e):Promise.resolve(this.state)}refresh(e={}){var t,n;const o=r.debug.extend("client:refresh");o("Attempting to refresh with refresh_token...");const i=null===(n=null===(t=this.state)||void 0===t?void 0:t.tokenResponse)||void 0===n?void 0:n.refresh_token;(0,r.assert)(i,"Unable to refresh. No refresh_token found.");const s=this.state.tokenUri;(0,r.assert)(s,"Unable to refresh. No tokenUri found.");const a=this.getState("tokenResponse.scope")||"",u=a.search(/\boffline_access\b/)>-1,c=a.search(/\bonline_access\b/)>-1;if((0,r.assert)(u||c,"Unable to refresh. No offline_access or online_access scope found."),!this._refreshTask){const t=Object.assign(Object.assign({credentials:this.environment.options.refreshTokenWithCredentials||"same-origin"},e),{method:"POST",mode:"cors",headers:Object.assign(Object.assign({},e.headers||{}),{"content-type":"application/x-www-form-urlencoded"}),body:`grant_type=refresh_token&refresh_token=${encodeURIComponent(i)}`});if(!("authorization"in t.headers)){const{clientSecret:e,clientId:r}=this.state;e&&(t.headers.authorization="Basic "+this.environment.btoa(r+":"+e))}this._refreshTask=(0,r.request)(s,t).then((e=>((0,r.assert)(e.access_token,"No access token received"),o("Received new access token response %O",e),this.state.tokenResponse=Object.assign(Object.assign({},this.state.tokenResponse),e),this.state.expiresAt=(0,r.getAccessTokenExpiration)(e,this.environment),this.state))).catch((e=>{var t,r;throw(null===(r=null===(t=this.state)||void 0===t?void 0:t.tokenResponse)||void 0===r?void 0:r.refresh_token)&&(o("Deleting the expired or invalid refresh token."),delete this.state.tokenResponse.refresh_token),e})).finally((()=>{this._refreshTask=null;const e=this.state.key;e?this.environment.getStorage().set(e,this.state):o("No 'key' found in Clint.state. Cannot persist the instance.")}))}return this._refreshTask}byCode(e,t){return(0,r.byCode)(e,t)}byCodes(e,t){return(0,r.byCodes)(e,t)}getPath(e,t=""){return(0,r.getPath)(e,t)}getState(e=""){return(0,r.getPath)(Object.assign({},this.state),e)}getFhirVersion(){return(0,r.fetchConformanceStatement)(this.state.serverUrl).then((e=>e.fhirVersion))}getFhirRelease(){return this.getFhirVersion().then((e=>{var t;return null!==(t=i.fhirVersions[e])&&void 0!==t?t:0}))}}})),o.register("bbDtp",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default={expired:"Session expired! Please re-launch the app",noScopeForId:"Trying to get the ID of the selected %s. Please add 'launch' or 'launch/%s' to the requested scopes and try again.",noIfNoAuth:"You are trying to get %s but the app is not authorized yet.",noFreeContext:"Please don't use open fhir servers if you need to access launch context items like the %S."}})),o.register("7dNBp",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});e.exports.default=class{async get(e){const t=sessionStorage[e];return t?JSON.parse(t):null}async set(e,t){return sessionStorage[e]=JSON.stringify(t),t}async unset(e){return e in sessionStorage&&(delete sessionStorage[e],!0)}}})),o.register("8lccY",(function(e,t){o("ivc4A"),Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.signCompactJws=e.exports.importJWK=e.exports.generatePKCEChallenge=e.exports.digestSha256=e.exports.randomBytes=void 0;var r=o("a4eSS");const n="object"==typeof globalThis&&globalThis.crypto?globalThis.crypto:o("3PabD").default,i=n.subtle,s={ES384:{name:"ECDSA",namedCurve:"P-384"},RS384:{name:"RSASSA-PKCS1-v1_5",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-384"}}};function a(e){return n.getRandomValues(new Uint8Array(e))}async function u(e){const t=(new TextEncoder).encode(e),r=await i.digest("SHA-256",t);return new Uint8Array(r)}e.exports.randomBytes=a,e.exports.digestSha256=u;e.exports.generatePKCEChallenge=async(e=96)=>{const t=a(e),n=(0,r.fromUint8Array)(t,!0);return{codeChallenge:(0,r.fromUint8Array)(await u(n),!0),codeVerifier:n}},e.exports.importJWK=async function(e){if(!e.alg)throw new Error('The "alg" property of the JWK must be set to "ES384" or "RS384"');if(Array.isArray(e.key_ops)||(e.key_ops=["sign"]),!e.key_ops.includes("sign"))throw new Error('The "key_ops" property of the JWK does not contain "sign"');try{return await i.importKey("jwk",e,s[e.alg],!0===e.ext,e.key_ops)}catch(t){throw new Error(`The ${e.alg} is not supported by this browser: ${t}`)}},e.exports.signCompactJws=async function(e,t,n,o){const s=JSON.stringify(Object.assign(Object.assign({},n),{alg:e})),a=JSON.stringify(o),u=`${(0,r.encodeURL)(s)}.${(0,r.encodeURL)(a)}`,c=await i.sign(Object.assign(Object.assign({},t.algorithm),{hash:"SHA-384"}),t,(new TextEncoder).encode(u));return`${u}.${(0,r.fromUint8Array)(new Uint8Array(c),!0)}`}})),o.register("ivc4A",(function(e,t){var r=o("7mb70"),n=o("bGtV7"),i=o("5uE0U"),s=o("ptmgx"),a=o("1dvsP"),u=o("dZoqA"),c=o("8lFU3"),f=r.RangeError,l=r.Int8Array,p=l&&l.prototype,h=p&&p.set,d=i.aTypedArray,y=i.exportTypedArrayMethod,g=!c((function(){var e=new Uint8ClampedArray(2);return n(h,e,{length:1,0:3},1),3!==e[1]})),b=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new l(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));y("set",(function(e){d(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=u(e);if(g)return n(h,this,r,t);var o=this.length,i=s(r),c=0;if(i+t>o)throw f("Wrong length");for(;c<i;)this[t+c]=r[c++]}),!g||b)})),o.register("7mb70",(function(t,r){var n=function(e){return e&&e.Math==Math&&e};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()})),o.register("bGtV7",(function(e,t){var r=o("gcG3g"),n=Function.prototype.call;e.exports=r?n.bind(n):function(){return n.apply(n,arguments)}})),o.register("gcG3g",(function(e,t){var r=o("8lFU3");e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))})),o.register("8lFU3",(function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}})),o.register("5uE0U",(function(e,t){var r,n,i,s=o("iqwPN"),a=o("kxexm"),u=o("7mb70"),c=o("9GTLg"),f=o("96Da4"),l=o("2HOcD"),p=o("f9qXf"),h=o("chuuX"),d=o("bylnm"),y=o("5zwnU"),g=o("3RKYQ").f,b=o("5Ef1u"),m=o("eiOHr"),w=o("86ypM"),v=o("blCy8"),A=o("84zlK"),x=o("51DEQ"),E=x.enforce,C=x.get,S=u.Int8Array,k=S&&S.prototype,O=u.Uint8ClampedArray,R=O&&O.prototype,P=S&&m(S),U=k&&m(k),T=Object.prototype,_=u.TypeError,j=v("toStringTag"),I=A("TYPED_ARRAY_TAG"),F="TypedArrayConstructor",B=s&&!!w&&"Opera"!==p(u.opera),M=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},K=function(e){var t=m(e);if(f(t)){var r=C(t);return r&&l(r,F)?r.TypedArrayConstructor:K(t)}},q=function(e){if(!f(e))return!1;var t=p(e);return l(L,t)||l(D,t)};for(r in L)(i=(n=u[r])&&n.prototype)?E(i).TypedArrayConstructor=n:B=!1;for(r in D)(i=(n=u[r])&&n.prototype)&&(E(i).TypedArrayConstructor=n);if((!B||!c(P)||P===Function.prototype)&&(P=function(){throw _("Incorrect invocation")},B))for(r in L)u[r]&&w(u[r],P);if((!B||!U||U===T)&&(U=P.prototype,B))for(r in L)u[r]&&w(u[r].prototype,U);if(B&&m(R)!==U&&w(R,U),a&&!l(U,j))for(r in M=!0,g(U,j,{get:function(){return f(this)?this[I]:void 0}}),L)u[r]&&d(u[r],I,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:B,TYPED_ARRAY_TAG:M&&I,aTypedArray:function(e){if(q(e))return e;throw _("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!w||b(P,e)))return e;throw _(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(a){if(r)for(var o in L){var i=u[o];if(i&&l(i.prototype,e))try{delete i.prototype[e]}catch(r){try{i.prototype[e]=t}catch(e){}}}U[e]&&!r||y(U,e,r?t:B&&k[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(a){if(w){if(r)for(n in L)if((o=u[n])&&l(o,e))try{delete o[e]}catch(e){}if(P[e]&&!r)return;try{return y(P,e,r?t:B&&P[e]||t)}catch(e){}}for(n in L)!(o=u[n])||o[e]&&!r||y(o,e,t)}},getTypedArrayConstructor:K,isView:function(e){if(!f(e))return!1;var t=p(e);return"DataView"===t||l(L,t)||l(D,t)},isTypedArray:q,TypedArray:P,TypedArrayPrototype:U}})),o.register("iqwPN",(function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView})),o.register("kxexm",(function(e,t){var r=o("8lFU3");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))})),o.register("9GTLg",(function(e,t){var r=o("cs4Sg"),n=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===n}:function(e){return"function"==typeof e}})),o.register("cs4Sg",(function(e,t){var r="object"==typeof document&&document.all,n=void 0===r&&void 0!==r;e.exports={all:r,IS_HTMLDDA:n}})),o.register("96Da4",(function(e,t){var r=o("9GTLg"),n=o("cs4Sg"),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===i}:function(e){return"object"==typeof e?null!==e:r(e)}})),o.register("2HOcD",(function(e,t){var r=o("5Okwt"),n=o("dZoqA"),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(n(e),t)}})),o.register("5Okwt",(function(e,t){var r=o("gcG3g"),n=Function.prototype,i=n.call,s=r&&n.bind.bind(i,i);e.exports=r?s:function(e){return function(){return i.apply(e,arguments)}}})),o.register("dZoqA",(function(e,t){var r=o("gMtBp"),n=Object;e.exports=function(e){return n(r(e))}})),o.register("gMtBp",(function(e,t){var r=o("aIKND"),n=TypeError;e.exports=function(e){if(r(e))throw n("Can't call method on "+e);return e}})),o.register("aIKND",(function(e,t){e.exports=function(e){return null==e}})),o.register("f9qXf",(function(e,t){var r=o("dYl9B"),n=o("9GTLg"),i=o("faIBy"),s=o("blCy8")("toStringTag"),a=Object,u="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:u?i(t):"Object"==(o=i(t))&&n(t.callee)?"Arguments":o}})),o.register("dYl9B",(function(e,t){var r={};r[o("blCy8")("toStringTag")]="z",e.exports="[object z]"===String(r)})),o.register("blCy8",(function(e,t){var r=o("7mb70"),n=o("2axMY"),i=o("2HOcD"),s=o("84zlK"),a=o("6n5Js"),u=o("6aX88"),c=n("wks"),f=r.Symbol,l=f&&f.for,p=u?f:f&&f.withoutSetter||s;e.exports=function(e){if(!i(c,e)||!a&&"string"!=typeof c[e]){var t="Symbol."+e;a&&i(f,e)?c[e]=f[e]:c[e]=u&&l?l(t):p(t)}return c[e]}})),o.register("2axMY",(function(e,t){var r=o("jfGLK"),n=o("hRrSO");(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),o.register("jfGLK",(function(e,t){e.exports=!1})),o.register("hRrSO",(function(e,t){var r=o("7mb70"),n=o("6BhPC"),i="__core-js_shared__",s=r["__core-js_shared__"]||n(i,{});e.exports=s})),o.register("6BhPC",(function(e,t){var r=o("7mb70"),n=Object.defineProperty;e.exports=function(e,t){try{n(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}})),o.register("84zlK",(function(e,t){var r=o("5Okwt"),n=0,i=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++n+i,36)}})),o.register("6n5Js",(function(e,t){var r=o("dbmhE"),n=o("8lFU3");e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))})),o.register("dbmhE",(function(e,t){var r,n,i=o("7mb70"),s=o("6hv4b"),a=i.process,u=i.Deno,c=a&&a.versions||u&&u.version,f=c&&c.v8;f&&(n=(r=f.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!n&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(n=+r[1]),e.exports=n})),o.register("6hv4b",(function(e,t){var r=o("eaZdY");e.exports=r("navigator","userAgent")||""})),o.register("eaZdY",(function(e,t){var r=o("7mb70"),n=o("9GTLg"),i=function(e){return n(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}})),o.register("6aX88",(function(e,t){var r=o("6n5Js");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator})),o.register("faIBy",(function(e,t){var r=o("5Okwt"),n=r({}.toString),i=r("".slice);e.exports=function(e){return i(n(e),8,-1)}})),o.register("chuuX",(function(e,t){var r=String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}})),o.register("bylnm",(function(e,t){var r=o("kxexm"),n=o("3RKYQ"),i=o("fEYls");e.exports=r?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}})),o.register("3RKYQ",(function(e,r){var n;t(e.exports,"f",(()=>n),(e=>n=e));var i=o("kxexm"),s=o("ieeYC"),a=o("1TEKD"),u=o("hc2VB"),c=o("aUydt"),f=TypeError,l=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",y="writable";n=i?a?function(e,t,r){if(u(e),t=c(t),u(r),"function"==typeof e&&"prototype"===t&&"value"in r&&y in r&&!r.writable){var n=p(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:d in r?r.configurable:n.configurable,enumerable:h in r?r.enumerable:n.enumerable,writable:!1})}return l(e,t,r)}:l:function(e,t,r){if(u(e),t=c(t),u(r),s)try{return l(e,t,r)}catch(e){}if("get"in r||"set"in r)throw f("Accessors not supported");return"value"in r&&(e[t]=r.value),e}})),o.register("ieeYC",(function(e,t){var r=o("kxexm"),n=o("8lFU3"),i=o("1RN1j");e.exports=!r&&!n((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))})),o.register("1RN1j",(function(e,t){var r=o("7mb70"),n=o("96Da4"),i=r.document,s=n(i)&&n(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}})),o.register("1TEKD",(function(e,t){var r=o("kxexm"),n=o("8lFU3");e.exports=r&&n((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))})),o.register("hc2VB",(function(e,t){var r=o("96Da4"),n=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw i(n(e)+" is not an object")}})),o.register("aUydt",(function(e,t){var r=o("cmpCY"),n=o("XW8Vm");e.exports=function(e){var t=r(e,"string");return n(t)?t:t+""}})),o.register("cmpCY",(function(e,t){var r=o("bGtV7"),n=o("96Da4"),i=o("XW8Vm"),s=o("kdzTk"),a=o("fc07P"),u=o("blCy8"),c=TypeError,f=u("toPrimitive");e.exports=function(e,t){if(!n(e)||i(e))return e;var o,u=s(e,f);if(u){if(void 0===t&&(t="default"),o=r(u,e,t),!n(o)||i(o))return o;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}})),o.register("XW8Vm",(function(e,t){var r=o("eaZdY"),n=o("9GTLg"),i=o("5Ef1u"),s=o("6aX88"),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return n(t)&&i(t.prototype,a(e))}})),o.register("5Ef1u",(function(e,t){var r=o("5Okwt");e.exports=r({}.isPrototypeOf)})),o.register("kdzTk",(function(e,t){var r=o("eXHxq"),n=o("aIKND");e.exports=function(e,t){var o=e[t];return n(o)?void 0:r(o)}})),o.register("eXHxq",(function(e,t){var r=o("9GTLg"),n=o("chuuX"),i=TypeError;e.exports=function(e){if(r(e))return e;throw i(n(e)+" is not a function")}})),o.register("fc07P",(function(e,t){var r=o("bGtV7"),n=o("9GTLg"),i=o("96Da4"),s=TypeError;e.exports=function(e,t){var o,a;if("string"===t&&n(o=e.toString)&&!i(a=r(o,e)))return a;if(n(o=e.valueOf)&&!i(a=r(o,e)))return a;if("string"!==t&&n(o=e.toString)&&!i(a=r(o,e)))return a;throw s("Can't convert object to primitive value")}})),o.register("fEYls",(function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}})),o.register("5zwnU",(function(e,t){var r=o("9GTLg"),n=o("3RKYQ"),i=o("Q0KqA"),s=o("6BhPC");e.exports=function(e,t,o,a){a||(a={});var u=a.enumerable,c=void 0!==a.name?a.name:t;if(r(o)&&i(o,c,a),a.global)u?e[t]=o:s(t,o);else{try{a.unsafe?e[t]&&(u=!0):delete e[t]}catch(e){}u?e[t]=o:n.f(e,t,{value:o,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}})),o.register("Q0KqA",(function(e,t){var r=o("8lFU3"),n=o("9GTLg"),i=o("2HOcD"),s=o("kxexm"),a=o("b8MME").CONFIGURABLE,u=o("dbqDy"),c=o("51DEQ"),f=c.enforce,l=c.get,p=Object.defineProperty,h=s&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),d=String(String).split("String"),y=e.exports=function(e,t,r){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!i(e,"name")||a&&e.name!==t)&&(s?p(e,"name",{value:t,configurable:!0}):e.name=t),h&&r&&i(r,"arity")&&e.length!==r.arity&&p(e,"length",{value:r.arity});try{r&&i(r,"constructor")&&r.constructor?s&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=f(e);return i(n,"source")||(n.source=d.join("string"==typeof t?t:"")),e};Function.prototype.toString=y((function(){return n(this)&&l(this).source||u(this)}),"toString")})),o.register("b8MME",(function(e,t){var r=o("kxexm"),n=o("2HOcD"),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=n(i,"name"),u=a&&"something"===function(){}.name,c=a&&(!r||r&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}})),o.register("dbqDy",(function(e,t){var r=o("5Okwt"),n=o("9GTLg"),i=o("hRrSO"),s=r(Function.toString);n(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource})),o.register("51DEQ",(function(e,t){var r,n,i,s=o("6amDj"),a=o("7mb70"),u=o("96Da4"),c=o("bylnm"),f=o("2HOcD"),l=o("hRrSO"),p=o("bgRz0"),h=o("dGabS"),d="Object already initialized",y=a.TypeError,g=a.WeakMap;if(s||l.state){var b=l.state||(l.state=new g);b.get=b.get,b.has=b.has,b.set=b.set,r=function(e,t){if(b.has(e))throw y(d);return t.facade=e,b.set(e,t),t},n=function(e){return b.get(e)||{}},i=function(e){return b.has(e)}}else{var m=p("state");h[m]=!0,r=function(e,t){if(f(e,m))throw y(d);return t.facade=e,c(e,m,t),t},n=function(e){return f(e,m)?e[m]:{}},i=function(e){return f(e,m)}}e.exports={set:r,get:n,has:i,enforce:function(e){return i(e)?n(e):r(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=n(t)).type!==e)throw y("Incompatible receiver, "+e+" required");return r}}}})),o.register("6amDj",(function(e,t){var r=o("7mb70"),n=o("9GTLg"),i=r.WeakMap;e.exports=n(i)&&/native code/.test(String(i))})),o.register("bgRz0",(function(e,t){var r=o("2axMY"),n=o("84zlK"),i=r("keys");e.exports=function(e){return i[e]||(i[e]=n(e))}})),o.register("dGabS",(function(e,t){e.exports={}})),o.register("eiOHr",(function(e,t){var r=o("2HOcD"),n=o("9GTLg"),i=o("dZoqA"),s=o("bgRz0"),a=o("jDKge"),u=s("IE_PROTO"),c=Object,f=c.prototype;e.exports=a?c.getPrototypeOf:function(e){var t=i(e);if(r(t,u))return t[u];var o=t.constructor;return n(o)&&t instanceof o?o.prototype:t instanceof c?f:null}})),o.register("jDKge",(function(e,t){var r=o("8lFU3");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))})),o.register("86ypM",(function(e,t){var r=o("5Okwt"),n=o("hc2VB"),i=o("igRk2");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,o={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),t=o instanceof Array}catch(e){}return function(r,o){return n(r),i(o),t?e(r,o):r.__proto__=o,r}}():void 0)})),o.register("igRk2",(function(e,t){var r=o("9GTLg"),n=String,i=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw i("Can't set "+n(e)+" as a prototype")}})),o.register("ptmgx",(function(e,t){var r=o("6pMmI");e.exports=function(e){return r(e.length)}})),o.register("6pMmI",(function(e,t){var r=o("fBlGn"),n=Math.min;e.exports=function(e){return e>0?n(r(e),9007199254740991):0}})),o.register("fBlGn",(function(e,t){var r=o("7aV2g");e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}})),o.register("7aV2g",(function(e,t){var r=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?n:r)(t)}})),o.register("1dvsP",(function(e,t){var r=o("F2ned"),n=RangeError;e.exports=function(e,t){var o=r(e);if(o%t)throw n("Wrong offset");return o}})),o.register("F2ned",(function(e,t){var r=o("fBlGn"),n=RangeError;e.exports=function(e){var t=r(e);if(t<0)throw n("The argument can't be less than 0");return t}})),o.register("a4eSS",(function(e,r){t(e.exports,"fromUint8Array",(()=>v)),t(e.exports,"encodeURL",(()=>k)),t(e.exports,"decode",(()=>F));var n=o("6ZWSX").Buffer;const i="function"==typeof atob,s="function"==typeof btoa,a="function"==typeof n,u="function"==typeof TextDecoder?new TextDecoder:void 0,c="function"==typeof TextEncoder?new TextEncoder:void 0,f=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),l=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(f),p=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,h=String.fromCharCode.bind(String),d="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),y=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),g=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),b=e=>{let t,r,n,o,i="";const s=e.length%3;for(let s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|o,i+=f[t>>18&63]+f[t>>12&63]+f[t>>6&63]+f[63&t]}return s?i.slice(0,s-3)+"===".substring(s):i},m=s?e=>btoa(e):a?e=>n.from(e,"binary").toString("base64"):b,w=a?e=>n.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(h.apply(null,e.subarray(r,r+4096)));return m(t.join(""))},v=(e,t=!1)=>t?y(w(e)):w(e),A=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?h(192|t>>>6)+h(128|63&t):h(224|t>>>12&15)+h(128|t>>>6&63)+h(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return h(240|t>>>18&7)+h(128|t>>>12&63)+h(128|t>>>6&63)+h(128|63&t)},x=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,E=e=>e.replace(x,A),C=a?e=>n.from(e,"utf8").toString("base64"):c?e=>w(c.encode(e)):e=>m(E(e)),S=(e,t=!1)=>t?y(C(e)):C(e),k=e=>S(e,!0),O=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,R=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return h(55296+(t>>>10))+h(56320+(1023&t));case 3:return h((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return h((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},P=e=>e.replace(O,R),U=e=>{if(e=e.replace(/\s+/g,""),!p.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,o="";for(let i=0;i<e.length;)t=l[e.charAt(i++)]<<18|l[e.charAt(i++)]<<12|(r=l[e.charAt(i++)])<<6|(n=l[e.charAt(i++)]),o+=64===r?h(t>>16&255):64===n?h(t>>16&255,t>>8&255):h(t>>16&255,t>>8&255,255&t);return o},T=i?e=>atob(g(e)):a?e=>n.from(e,"base64").toString("binary"):U,_=a?e=>d(n.from(e,"base64")):e=>d(T(e),(e=>e.charCodeAt(0))),j=a?e=>n.from(e,"base64").toString("utf8"):u?e=>u.decode(_(e)):e=>P(T(e)),I=e=>g(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),F=e=>j(I(e))})),o.register("6ZWSX",(function(e,r){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var n,i;t(e.exports,"Buffer",(()=>n),(e=>n=e)),t(e.exports,"INSPECT_MAX_BYTES",(()=>i),(e=>i=e));var s=o("kuxul"),a=o("9NvM5"),u="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n=l,i=50;var c=2147483647;function f(e){if(e>c)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return p(e,t,r)}function p(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),n=f(r),o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(H(e,Uint8Array)){var t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return y(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer))return g(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(H(e,SharedArrayBuffer)||e&&H(e.buffer,SharedArrayBuffer)))return g(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);var o=function(e){if(l.isBuffer(e)){var t=0|b(e.length),r=f(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||J(e.length)?f(0):y(e);if("Buffer"===e.type&&Array.isArray(e.data))return y(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return h(e),f(e<0?0:0|b(e))}function y(e){for(var t=e.length<0?0:0|b(e.length),r=f(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function b(e){if(e>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(e).length;default:if(o)return n?-1:q(e).length;t=(""+t).toLowerCase(),o=!0}}function w(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return _(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function A(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:x(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):x(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function x(e,t,r,n,o){var i,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var f=-1;for(i=r;i<a;i++)if(c(e,i)===c(t,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*s}else-1!==f&&(i-=i-f),f=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var l=!0,p=0;p<u;p++)if(c(e,i+p)!==c(t,p)){l=!1;break}if(l)return i}return-1}function E(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(J(a))return s;e[r+s]=a}return s}function C(e,t,r,n){return z(q(t,e.length-r),e,r,n)}function S(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function k(e,t,r,n){return z(N(t),e,r,n)}function O(e,t,r,n){return z(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function R(e,t,r){return 0===t&&r===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,u,c=e[o],f=null,l=c>239?4:c>223?3:c>191?2:1;if(o+l<=r)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&c)<<6|63&i)>127&&(f=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(u=(15&c)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=l}return function(e){var t=e.length;if(t<=U)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=U));return r}(n)}l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return p(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?f(e):void 0!==t?"string"==typeof r?f(e).fill(t,r):f(e).fill(t):f(e)}(e,t,r)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(H(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(H(i,Uint8Array))o+i.length>n.length?l.from(i).copy(n,o):Uint8Array.prototype.set.call(n,i,o);else{if(!l.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o)}o+=i.length}return n},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):w.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=i;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},u&&(l.prototype[u]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,o){if(H(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(n,o),c=e.slice(t,r),f=0;f<a;++f)if(u[f]!==c[f]){i=u[f],s=c[f];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return A(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return A(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return E(this,e,t,r);case"utf8":case"utf-8":return C(this,e,t,r);case"ascii":case"latin1":case"binary":return S(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function T(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function _(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function j(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=Y[e[i]];return o}function I(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function F(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,o){return t=+t,r>>>=0,o||M(e,0,r,4),a.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return t=+t,r>>>=0,o||M(e,0,r,8),a.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),a.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),a.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),a.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),a.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||B(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||B(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);B(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);B(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=l.isBuffer(e)?e:l.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var K=/[^+/0-9A-Za-z-_]/g;function q(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function N(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}var Y=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)t[n+o]=e[r]+e[o];return t}()})),o.register("kuxul",(function(e,r){var n,o;t(e.exports,"toByteArray",(()=>n),(e=>n=e)),t(e.exports,"fromByteArray",(()=>o),(e=>o=e)),n=function(e){var t,r,n=l(e),o=n[0],i=n[1],u=new a(function(e,t,r){return 3*(t+r)/4-r}(0,o,i)),c=0,f=i>0?o-4:o;for(r=0;r<f;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===i&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,u[c++]=255&t);1===i&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},o=function(e){for(var t,r=e.length,n=r%3,o=[],s=16383,a=0,u=r-n;a<u;a+=s)o.push(p(e,a,a+s>u?u:a+s));1===n?(t=e[r-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return o.join("")};for(var i=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,f=u.length;c<f;++c)i[c]=u[c],s[u.charCodeAt(c)]=c;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function p(e,t,r){for(var n,o,s=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[(o=n)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63})),o.register("9NvM5",(function(e,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var n,o;t(e.exports,"read",(()=>n),(e=>n=e)),t(e.exports,"write",(()=>o),(e=>o=e)),n=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,f=-7,l=r?o-1:0,p=r?-1:1,h=e[t+l];for(l+=p,i=h&(1<<-f)-1,h>>=-f,f+=a;f>0;i=256*i+e[t+l],l+=p,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=n;f>0;s=256*s+e[t+l],l+=p,f-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),i-=c}return(h?-1:1)*s*Math.pow(2,i-n)},o=function(e,t,r,n,o,i){var s,a,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*u-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[r+h]=255&s,h+=d,s/=256,c-=8);e[r+h-d]|=128*y}})),o.register("3PabD",(function(e,r){t(e.exports,"default",(()=>n)),o("cX3md");var n=window.crypto})),o.register("cX3md",(function(e,r){var n;n=e.exports,Object.defineProperty(n,"__esModule",{value:!0,configurable:!0}),t(e.exports,"default",(()=>o),(e=>o=e)),
/**
 * @file Web Cryptography API shim
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */
function(t,r){"function"==typeof define&&define.amd?define([],(function(){return r(t)})):e.exports?e.exports=r(t):r(t)}("undefined"!=typeof self?self:void 0,(function(e){if("function"!=typeof Promise)throw"Promise support required";var t=e.crypto||e.msCrypto;if(t){var r=t.subtle||t.webkitSubtle;if(r){var n=e.Crypto||t.constructor||Object,o=e.SubtleCrypto||r.constructor||Object,i=(e.CryptoKey||e.Key,e.navigator.userAgent.indexOf("Edge/")>-1),s=!!e.msCrypto&&!i,a=!t.subtle&&!!t.webkitSubtle;if(s||a){var u={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},c={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var n=r[e];r[e]=function(o,i,u){var c,f,l,d,v=[].slice.call(arguments);switch(e){case"generateKey":c=y(o),f=i,l=u;break;case"importKey":c=y(u),f=v[3],l=v[4],"jwk"===o&&((i=b(i)).alg||(i.alg=g(c)),i.key_ops||(i.key_ops="oct"!==i.kty?"d"in i?l.filter(S):l.filter(C):l.slice()),v[1]=m(i));break;case"unwrapKey":c=v[4],f=v[5],l=v[6],v[2]=u._key}if("generateKey"===e&&"HMAC"===c.name&&c.hash)return c.length=c.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[c.hash.name],r.importKey("raw",t.getRandomValues(new Uint8Array(c.length+7>>3)),c,f,l);if(a&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===c.name&&(!c.modulusLength||c.modulusLength>=2048))return(o=y(o)).name="RSAES-PKCS1-v1_5",delete o.hash,r.generateKey(o,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([r.exportKey("jwk",e.publicKey),r.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=g(c),e[0].key_ops=l.filter(C),e[1].key_ops=l.filter(S),Promise.all([r.importKey("jwk",e[0],c,!0,e[0].key_ops),r.importKey("jwk",e[1],c,f,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((a||s&&"SHA-1"===(c.hash||{}).name)&&"importKey"===e&&"jwk"===o&&"HMAC"===c.name&&"oct"===i.kty)return r.importKey("raw",h(p(i.k)),u,v[3],v[4]);if(a&&"importKey"===e&&("spki"===o||"pkcs8"===o))return r.importKey("jwk",w(i),u,v[3],v[4]);if(s&&"unwrapKey"===e)return r.decrypt(v[3],u,i).then((function(e){return r.importKey(o,e,v[4],v[5],v[6])}));try{d=n.apply(r,v)}catch(e){return Promise.reject(e)}return s&&(d=new Promise((function(e,t){d.onabort=d.onerror=function(e){t(e)},d.oncomplete=function(t){e(t.target.result)}}))),d=d.then((function(e){return"HMAC"===c.name&&(c.length||(c.length=8*e.algorithm.length)),0==c.name.search("RSA")&&(c.modulusLength||(c.modulusLength=(e.publicKey||e).algorithm.modulusLength),c.publicExponent||(c.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e=e.publicKey&&e.privateKey?{publicKey:new E(e.publicKey,c,f,l.filter(C)),privateKey:new E(e.privateKey,c,f,l.filter(S))}:new E(e,c,f,l)}))}})),["exportKey","wrapKey"].forEach((function(e){var t=r[e];r[e]=function(n,o,i){var u,c=[].slice.call(arguments);switch(e){case"exportKey":c[1]=o._key;break;case"wrapKey":c[1]=o._key,c[2]=i._key}if((a||s&&"SHA-1"===(o.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===n&&"HMAC"===o.algorithm.name&&(c[0]="raw"),!a||"exportKey"!==e||"spki"!==n&&"pkcs8"!==n||(c[0]="jwk"),s&&"wrapKey"===e)return r.exportKey(n,o).then((function(e){return"jwk"===n&&(e=h(unescape(encodeURIComponent(JSON.stringify(b(e)))))),r.encrypt(c[3],i,e)}));try{u=t.apply(r,c)}catch(e){return Promise.reject(e)}return s&&(u=new Promise((function(e,t){u.onabort=u.onerror=function(e){t(e)},u.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===n&&(u=u.then((function(e){return(a||s&&"SHA-1"===(o.algorithm.hash||{}).name)&&"HMAC"===o.algorithm.name?{kty:"oct",alg:g(o.algorithm),key_ops:o.usages.slice(),ext:!0,k:l(d(e))}:((e=b(e)).alg||(e.alg=g(o.algorithm)),e.key_ops||(e.key_ops="public"===o.type?o.usages.filter(C):"private"===o.type?o.usages.filter(S):o.usages.slice()),e)}))),!a||"exportKey"!==e||"spki"!==n&&"pkcs8"!==n||(u=u.then((function(e){return e=v(b(e))}))),u}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=r[e];r[e]=function(n,o,i,a){if(s&&(!i.byteLength||a&&!a.byteLength))throw new Error("Empy input is not allowed");var u,c=[].slice.call(arguments),f=y(n);if(s&&"decrypt"===e&&"AES-GCM"===f.name){var l=n.tagLength>>3;c[2]=(i.buffer||i).slice(0,i.byteLength-l),n.tag=(i.buffer||i).slice(i.byteLength-l)}c[1]=o._key;try{u=t.apply(r,c)}catch(e){return Promise.reject(e)}return s&&(u=new Promise((function(t,r){u.onabort=u.onerror=function(e){r(e)},u.oncomplete=function(r){r=r.target.result;if("encrypt"===e&&r instanceof AesGcmEncryptResult){var n=r.ciphertext,o=r.tag;(r=new Uint8Array(n.byteLength+o.byteLength)).set(new Uint8Array(n),0),r.set(new Uint8Array(o),n.byteLength),r=r.buffer}t(r)}}))),u}})),s){var f=r.digest;r.digest=function(e,t){if(!t.byteLength)throw new Error("Empy input is not allowed");var n;try{n=f.call(r,e,t)}catch(e){return Promise.reject(e)}return n=new Promise((function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(t,{getRandomValues:{value:function(e){return t.getRandomValues(e)}},subtle:{value:r}}),e.CryptoKey=E}a&&(t.subtle=r,e.Crypto=n,e.SubtleCrypto=o,e.CryptoKey=E)}}}function l(e){return btoa(e).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function h(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function d(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function y(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=y(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=y(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function g(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function b(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(d(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach((function(r){r in e&&(t[r]=e[r])}));break;default:throw new TypeError("Unsupported key type")}return t}function m(e){var t=b(e);return s&&(t.extractable=t.ext,delete t.ext),h(unescape(encodeURIComponent(JSON.stringify(t)))).buffer}function w(e){var t=A(e),r=!1;t.length>2&&(r=!0,t.shift());var n={ext:!0};if("1.2.840.113549.1.1.1"!==t[0][0])throw new TypeError("Unsupported key type");var o=["n","e","d","p","q","dp","dq","qi"],i=A(t[1]);r&&i.shift();for(var s=0;s<i.length;s++)i[s][0]||(i[s]=i[s].subarray(1)),n[o[s]]=l(d(i[s]));return n.kty="RSA",n}function v(e){var t,r=[["",null]],n=!1;if("RSA"!==e.kty)throw new TypeError("Unsupported key type");for(var o=["n","e","d","p","q","dp","dq","qi"],i=[],s=0;s<o.length&&o[s]in e;s++){var a=i[s]=h(p(e[o[s]]));128&a[0]&&(i[s]=new Uint8Array(a.length+1),i[s].set(a,1))}return i.length>2&&(n=!0,i.unshift(new Uint8Array([0]))),r[0][0]="1.2.840.113549.1.1.1",t=i,r.push(new Uint8Array(x(t)).buffer),n?r.unshift(new Uint8Array([0])):r[1]={tag:3,value:r[1]},new Uint8Array(x(r)).buffer}function A(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),t.end-t.pos<2||t.end>e.length)throw new RangeError("Malformed DER");var r,n=e[t.pos++],o=e[t.pos++];if(o>=128){if(o&=127,t.end-t.pos<o)throw new RangeError("Malformed DER");for(var i=0;o--;)i<<=8,i|=e[t.pos++];o=i}if(t.end-t.pos<o)throw new RangeError("Malformed DER");switch(n){case 2:r=e.subarray(t.pos,t.pos+=o);break;case 3:if(e[t.pos++])throw new Error("Unsupported bit string");o--;case 4:r=new Uint8Array(e.subarray(t.pos,t.pos+=o)).buffer;break;case 5:r=null;break;case 6:var s=btoa(d(e.subarray(t.pos,t.pos+=o)));if(!(s in u))throw new Error("Unsupported OBJECT ID "+s);r=u[s];break;case 48:r=[];for(var a=t.pos+o;t.pos<a;)r.push(A(e,t));break;default:throw new Error("Unsupported DER tag 0x"+n.toString(16))}return r}function x(e,t){t||(t=[]);var r=0,n=0,o=t.length+2;if(t.push(0,0),e instanceof Uint8Array){r=2,n=e.length;for(var i=0;i<n;i++)t.push(e[i])}else if(e instanceof ArrayBuffer){r=4,n=e.byteLength,e=new Uint8Array(e);for(i=0;i<n;i++)t.push(e[i])}else if(null===e)r=5,n=0;else if("string"==typeof e&&e in c){var s=h(atob(c[e]));r=6,n=s.length;for(i=0;i<n;i++)t.push(s[i])}else if(e instanceof Array){for(i=0;i<e.length;i++)x(e[i],t);r=48,n=t.length-o}else{if(!("object"==typeof e&&3===e.tag&&e.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+e);r=3,n=(e=new Uint8Array(e.value)).byteLength,t.push(0);for(i=0;i<n;i++)t.push(e[i]);n++}if(n>=128){var a=n;n=4;for(t.splice(o,0,a>>24&255,a>>16&255,a>>8&255,255&a);n>1&&!(a>>24);)a<<=8,n--;n<4&&t.splice(o,4-n),n|=128}return t.splice(o-2,2,r,n),t}function E(e,t,r,n){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===r?e.extractable:r,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===n?e.usages:n,enumerable:!0}})}function C(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function S(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}}));var o={}})),o.register("lzME1",(function(t,r){var n;n=function(){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=o(e);if(t){var i=o(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=c(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},f.apply(this,arguments)}var l,p=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(e,[{key:"addEventListener",value:function(e,t,r){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:r})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n].callback===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),r=0,n=t.length;r<n;r++){var o=t[r];try{o.callback.call(this,e)}catch(e){Promise.resolve().then((function(){throw e}))}o.options&&o.options.once&&this.removeEventListener(e.type,o.callback)}return!e.defaultPrevented}}}]),e}(),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(a,e);var r=u(a);function a(){var e;return t(this,a),(e=r.call(this)).listeners||p.call(s(e)),Object.defineProperty(s(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(s(e),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(s(e),"reason",{value:void 0,writable:!0,configurable:!0}),e}return n(a,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),f(o(a.prototype),"dispatchEvent",this).call(this,e)}}]),a}(p),d=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new h,writable:!0,configurable:!0})}return n(e,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}var r=e;if(void 0===r)if("undefined"==typeof document)(r=new Error("This operation was aborted")).name="AbortError";else try{r=new DOMException("signal is aborted without reason")}catch(e){(r=new Error("This operation was aborted")).name="AbortError"}this.signal.reason=r,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",h.prototype[Symbol.toStringTag]="AbortSignal"),function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}(l="undefined"!=typeof self?self:e)&&(l.AbortController=d,l.AbortSignal=h)},"function"==typeof define&&define.amd?define(n):n()}));
//# sourceMappingURL=index.e3fc828b.js.map
